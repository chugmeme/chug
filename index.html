<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CHUG - Infinite Prosperity</title>
  <meta name="description" content="CHUG - The ultimate stage of cosmic prosperity.">
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="infinite-bg"></div>
  <div class="floating-orb">
    <div class="orb" aria-label="Open navigation menu" role="button" tabindex="0"></div>
    <div class="nav-hints">
      <a href="#about">About</a>
      <a href="#tokenomics">Tokenomics</a>
      <a href="#mission">Mission</a>
      <a href="#community">Community</a>
    </div>
  </div>

  <section class="hero">
    <div class="cosmic-canvas">
      <canvas id="cosmosCanvas"></canvas>
    </div>
    <div class="hero-content">
      <h1 class="hero-title">CHUG</h1>
      <div class="mascot-wrap">
        <!-- We'll dynamically set the video source via JS -->
        <!-- Use a poster image that matches your page background so it looks seamless. -->
        <video id="mascotVideo" class="mascot" autoplay loop muted playsinline preload="auto" poster="fallback.png" style="background: var(--color-light); object-fit:cover;"></video>
      </div>
      <p>At the *end of all horizons*, where <em>infinite abundance</em> meets <strong>eternal happiness</strong>, <strong>CHUG</strong> arrives to bestow <em>everything</em> upon you. Prosperity flows unboundâ€”yours to <strong>CHUG</strong> in endless delight.</p>
      <a href="#tokenomics" class="cta-button">Immerse & CHUG</a>
    </div>
  </section>

  <!-- Other sections: about, tokenomics, mission, community, footer remain the same. -->

  <script>
    // Particle animation code (unchanged from previous versions)
    const canvas = document.getElementById('cosmosCanvas');
    const ctx = canvas.getContext('2d');
    let w = canvas.width = window.innerWidth;
    let h = canvas.height = window.innerHeight;

    const particles = [];
    for(let i = 0; i < 120; i++){
        particles.push({
            x: Math.random()*w,
            y: Math.random()*h,
            vx: (Math.random()-0.5)*0.3,
            vy: (Math.random()-0.5)*0.3,
            r: Math.random()*2+1,
            hue: Math.random()*360
        });
    }

    function animate(){
        ctx.clearRect(0,0,w,h);
        ctx.globalCompositeOperation='lighter';
        for(let p of particles){
            p.x += p.vx;
            p.y += p.vy;
            if(p.x < 0 || p.x > w) p.vx *= -1;
            if(p.y < 0 || p.y > h) p.vy *= -1;

            ctx.beginPath();
            ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
            ctx.fillStyle = `hsla(${p.hue},100%,75%,0.5)`;
            ctx.fill();
        }
        requestAnimationFrame(animate);
    }
    animate();

    window.addEventListener('resize',()=>{
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
    });

    // Orb navigation code remains unchanged.
    const orb = document.querySelector('.floating-orb .orb');
    const navHints = document.querySelector('.nav-hints');
    let navOpen = false;
    function toggleNav() {
        navOpen = !navOpen;
        if (navOpen) {
            navHints.classList.add('show');
            document.addEventListener('click', handleOutsideClick);
        } else {
            navHints.classList.remove('show');
            document.removeEventListener('click', handleOutsideClick);
        }
    }

    orb.addEventListener('click', (e) => {
        e.stopPropagation();
        toggleNav();
    });

    function handleOutsideClick(e) {
        if (!e.target.closest('.floating-orb') && navOpen) {
            toggleNav();
        }
    }

    navHints.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
            if (navOpen) toggleNav();
        });
    });

    // Modern Safari detection (Safari 13+ with HEVC alpha)
    function supportsHEVCAlpha() {
        const ua = navigator.userAgent.toLowerCase();
        const hasMediaCapabilities = !!(navigator.mediaCapabilities && navigator.mediaCapabilities.decodingInfo);
        const isSafari = (ua.indexOf('safari') != -1) && (ua.indexOf('chrome') == -1) && (ua.indexOf('version/') != -1);
        return isSafari && hasMediaCapabilities;
    }

    const player = document.getElementById('mascotVideo');
    // If Safari 13+ (or newer): use HEVC alpha (the .mov file)
    // Else use WebM alpha
    if (supportsHEVCAlpha()) {
        player.src = 'mascot.mov';
    } else {
        player.src = 'mascot.webm';
    }
  </script>
</body>
</html>
