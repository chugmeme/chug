<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>CHUG - Infinite Prosperity</title>
    <meta name="description" content="CHUG - The ultimate stage of cosmic prosperity.">
    <link rel="icon" href="favicon.ico">
    <!-- Fonts: Fredoka One for CHUG title, Plus Jakarta Sans for other text -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Your existing CSS here */
        .mascot {
            width: 294px; 
            height: 294px;
            border-radius: 50%;
            box-shadow: none;
            object-fit: cover;
            background: transparent !important;
            -webkit-mask-image: -webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,1)));
            -webkit-background-size: contain;
        }
        
        /* Add specific iOS Chrome fixes */
        @supports (-webkit-touch-callout: none) {
            .mascot {
                -webkit-transform: translateZ(0);
                transform: translateZ(0);
                backface-visibility: hidden;
                perspective: 1000;
            }
        }
    </style>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Infinite background gradient -->
    <div class="infinite-bg"></div>

    <!-- Floating Orb Navigation -->
    <div class="floating-orb">
        <div class="orb" aria-label="Open navigation menu" role="button" tabindex="0"></div>
        <div class="nav-hints">
            <a href="#about">About</a>
            <a href="#tokenomics">Tokenomics</a>
            <a href="#mission">Mission</a>
            <a href="#community">Community</a>
        </div>
    </div>
    
    <section class="hero">
        <div class="cosmic-canvas">
            <canvas id="cosmosCanvas"></canvas>
        </div>
        <div class="hero-content">
            <h1 class="hero-heading"><span class="intro-line">Hi is</span><br>CHUG</h1>
            <div class="mascot-wrap">
                <video id="mascotVideo" class="mascot" autoplay loop muted playsinline preload="auto">
                    <!-- Sources will be dynamically added via JavaScript -->
                    <!-- Fallback image -->
                    <img src="fallback.png" alt="CHUG Mascot" />
                </video>
            </div>
            <p>At the <em>end of all horizons</em>, where <em>infinite abundance</em> meets <strong>eternal happiness</strong>, <strong>CHUG</strong> arrives to bestow <em>everything</em> upon you. Prosperity flows unboundâ€”yours to <strong>CHUG</strong> in endless delight.</p>
            <a href="#tokenomics" class="cta-button">Immerse &amp; CHUG</a>
        </div>
    </section>

    <!-- Rest of your sections remain unchanged -->
    
    <script>
        // Video Format Detection and Initialization
        async function detectVideoSupport() {
            const ua = navigator.userAgent.toLowerCase();
            const isIOS = /iphone|ipad|ipod/.test(ua);
            const isChromeiOS = /crios/.test(ua);
            const isSafariiOS = isIOS && !isChromeiOS && /safari/.test(ua);
            
            // For Safari iOS - try HEVC with alpha
            if (isSafariiOS) {
                return 'mascot.mov';
            }
            
            // For Chrome iOS - ensure VP9 with alpha
            if (isChromeiOS) {
                const player = document.getElementById('mascotVideo');
                // Set specific attributes for Chrome iOS
                player.style.webkitBackgroundSize = 'contain';
                player.style.webkitMaskImage = '-webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,1)))';
                return 'mascot9.webm';
            }
            
            // Default to WebM for other browsers
            return 'mascot9.webm';
        }

        // Initialize video source
        async function initVideo() {
            const player = document.getElementById('mascotVideo');
            const videoSource = await detectVideoSupport();
            
            // Remove existing sources
            while (player.firstChild) {
                player.removeChild(player.firstChild);
            }
            
            // Add appropriate source
            const source = document.createElement('source');
            source.src = videoSource;
            source.type = videoSource.endsWith('.mov') ? 'video/quicktime' : 'video/webm';
            player.appendChild(source);
            
            // Force reload
            player.load();
            
            // Play with error handling
            try {
                await player.play();
            } catch (err) {
                console.log('Autoplay prevented:', err);
                // Add play button or other fallback if needed
            }
        }

        // Call initialization when DOM is ready
        document.addEventListener('DOMContentLoaded', initVideo);

        // Canvas Animation
        const canvas = document.getElementById('cosmosCanvas');
        const ctx = canvas.getContext('2d');
        let w = canvas.width = window.innerWidth;
        let h = canvas.height = window.innerHeight;

        const paletteColors = [
            'rgba(151,253,228,0.7)',
            'rgba(52,153,140,0.7)',
            'rgba(237,255,252,0.7)'
        ];

        const particles = [];
        for(let i = 0; i < 120; i++){
            particles.push({
                x: Math.random()*w,
                y: Math.random()*h,
                vx: (Math.random()-0.5)*0.5,
                vy: (Math.random()-0.5)*0.5,
                r: Math.random()*3+1,
                color: paletteColors[Math.floor(Math.random()*paletteColors.length)]
            });
        }

        function animate(){
            ctx.clearRect(0,0,w,h);
            ctx.globalCompositeOperation='lighter';
            for(let p of particles){
                p.x += p.vx;
                p.y += p.vy;
                if(p.x < 0 || p.x > w) p.vx *= -1;
                if(p.y < 0 || p.y > h) p.vy *= -1;
                
                ctx.beginPath();
                ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
                ctx.fillStyle = p.color;
                ctx.fill();
            }
            requestAnimationFrame(animate);
        }
        animate();

        window.addEventListener('resize',()=>{
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
        });

        // Orb Navigation
        const orb = document.querySelector('.floating-orb .orb');
        const navHints = document.querySelector('.nav-hints');
        let navOpen = false;

        function toggleNav() {
            navOpen = !navOpen;
            if (navOpen) {
                navHints.classList.add('show');
                document.addEventListener('click', handleOutsideClick);
            } else {
                navHints.classList.remove('show');
                document.removeEventListener('click', handleOutsideClick);
            }
        }

        orb.addEventListener('click', (e) => {
            e.stopPropagation();
            toggleNav();
        });

        function handleOutsideClick(e) {
            if (!e.target.closest('.floating-orb') && navOpen) {
                toggleNav();
            }
        }

        navHints.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                if (navOpen) toggleNav();
            });
        });

        // Video playback monitoring
        const mascotVideo = document.getElementById('mascotVideo');
        mascotVideo.addEventListener('error', (e) => {
            console.error('Video error:', e);
            // Optionally show fallback content
        });

        mascotVideo.addEventListener('loadeddata', () => {
            console.log('Video loaded successfully');
        });
    </script>
</body>
</html>